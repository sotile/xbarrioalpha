// @ts-nocheck
const _0x570cef=_0x2d83;function _0x2d83(_0x3c0f9b,_0xaaa374){const _0x301a8f=_0x57b5();return _0x2d83=function(_0x1571ff,_0x16e94e){_0x1571ff=_0x1571ff-0x17a;let _0x1c5261=_0x301a8f[_0x1571ff];return _0x1c5261;},_0x2d83(_0x3c0f9b,_0xaaa374);}(function(_0x2703c5,_0xdd6c6a){const _0x234dce=_0x2d83,_0x19be63=_0x2703c5();while(!![]){try{const _0x5f3f27=parseInt(_0x234dce(0x1b4))/0x1*(parseInt(_0x234dce(0x202))/0x2)+-parseInt(_0x234dce(0x196))/0x3*(parseInt(_0x234dce(0x1bb))/0x4)+-parseInt(_0x234dce(0x1dc))/0x5*(-parseInt(_0x234dce(0x1ee))/0x6)+-parseInt(_0x234dce(0x23e))/0x7*(-parseInt(_0x234dce(0x182))/0x8)+-parseInt(_0x234dce(0x1e4))/0x9+-parseInt(_0x234dce(0x1e9))/0xa+-parseInt(_0x234dce(0x218))/0xb;if(_0x5f3f27===_0xdd6c6a)break;else _0x19be63['push'](_0x19be63['shift']());}catch(_0x28b32e){_0x19be63['push'](_0x19be63['shift']());}}}(_0x57b5,0xb5890));const _0x2bffa4=(function(){let _0x423b81=!![];return function(_0x26b8af,_0x2d25d9){const _0x4ce43d=_0x423b81?function(){const _0x125455=_0x2d83;if(_0x2d25d9){const _0x474fdd=_0x2d25d9[_0x125455(0x1b8)](_0x26b8af,arguments);return _0x2d25d9=null,_0x474fdd;}}:function(){};return _0x423b81=![],_0x4ce43d;};}()),_0x1324eb=_0x2bffa4(this,function(){const _0x5a019b=_0x2d83;return _0x1324eb[_0x5a019b(0x1d8)]()[_0x5a019b(0x237)](_0x5a019b(0x221))[_0x5a019b(0x1d8)]()[_0x5a019b(0x22d)](_0x1324eb)[_0x5a019b(0x237)](_0x5a019b(0x221));});_0x1324eb();const _0x16e94e=(function(){let _0x4a5a8c=!![];return function(_0x4d6921,_0x5fe250){const _0x3e35c1=_0x4a5a8c?function(){if(_0x5fe250){const _0x396262=_0x5fe250['apply'](_0x4d6921,arguments);return _0x5fe250=null,_0x396262;}}:function(){};return _0x4a5a8c=![],_0x3e35c1;};}()),_0x1571ff=_0x16e94e(this,function(){const _0x502df2=_0x2d83;let _0x3aa41b;try{const _0x321764=Function(_0x502df2(0x199)+_0x502df2(0x1d9)+');');_0x3aa41b=_0x321764();}catch(_0x52598c){_0x3aa41b=window;}const _0x318bd1=_0x3aa41b[_0x502df2(0x1c6)]=_0x3aa41b['console']||{},_0x5be3cf=[_0x502df2(0x204),_0x502df2(0x1a3),'info',_0x502df2(0x238),_0x502df2(0x19b),_0x502df2(0x21b),_0x502df2(0x1e5)];for(let _0x241c2d=0x0;_0x241c2d<_0x5be3cf['length'];_0x241c2d++){const _0x211644=_0x16e94e[_0x502df2(0x22d)][_0x502df2(0x1ca)][_0x502df2(0x1ed)](_0x16e94e),_0x497d90=_0x5be3cf[_0x241c2d],_0x38e6c1=_0x318bd1[_0x497d90]||_0x211644;_0x211644['__proto__']=_0x16e94e['bind'](_0x16e94e),_0x211644[_0x502df2(0x1d8)]=_0x38e6c1['toString'][_0x502df2(0x1ed)](_0x38e6c1),_0x318bd1[_0x497d90]=_0x211644;}});_0x1571ff();let videoElement=null,scannerContainer=null,statusDisplay=null,invitationDetailsDiv=null,approveBtn=null,qrcodeDiv=null,whatsappShareBtn=null,invitationsTable=null,codeReaderInstance=null,currentScannedCode=null;function _0x57b5(){const _0x3466ba=['bind','4193910jwxatD','tr.invitation-row','contains','onload','back','Error\x20al\x20eliminar\x20la\x20invitación:\x20','Error\x20de\x20red\x20o\x20servidor\x20al\x20guardar\x20imagen\x20QR.\x20Estado:\x20','approve-btn','DEBUG_APP_JS:\x20Fallo\x20lógico\x20en\x20verificación:','createElement','Error\x20interno:\x20Lógica\x20de\x20verificación\x20no\x20cargada.','DEBUG_APP_JS:\x20Clic\x20en\x20fila\x20de\x20invitación\x20principal.','data:','DEBUG_APP_JS:\x20Imagen\x20QR\x20obtenida\x20del\x20canvas.','DEBUG_APP_JS:\x20Error:\x20checkInvitation\x20function\x20not\x20found\x20when\x20processing\x20initialCode!','DEBUG_APP_JS:\x20Fila\x20de\x20detalles\x20ocultada.','alt','querySelector','Código\x20QR\x20para\x20','Fetch\x20error\x20al\x20eliminar\x20invitación:','6882cqTnmy','name','log','<p\x20style=\x22color:red;\x22>Error\x20al\x20cargar\x20librería\x20QR.</p>','CorrectLevel','DEBUG_APP_JS:\x20img.src\x20no\x20es\x20una\x20data\x20URL,\x20no\x20se\x20puede\x20guardar\x20fácilmente.','DEBUG_APP_JS:\x20Contenedor\x20del\x20escáner\x20oculto.','DEBUG_APP_JS:\x20###\x20Llamando\x20a\x20new\x20QRCode()\x20###','DEBUG_APP_JS:\x20Página\x20Seguridad\x20detectada\x20con\x20elemento\x20#scanner.\x20Inicializando\x20ZXing.','scanner-container','PermissionDeniedError','POST','Error\x20de\x20comunicación\x20al\x20verificar.','expanded','Invitación\x20eliminada\x20con\x20éxito:\x20','fecha_expiracion','Error:\x20rawCode\x20no\x20definido\x20o\x20vacío\x20para\x20generar\x20QR.','Error\x20al\x20iniciar\x20escáner.','N/A','preventDefault','DEBUG_APP_JS:\x20Datos\x20JSON\x20de\x20guardado\x20de\x20imagen\x20QR:','whatsapp-share-btn','17018980UcxeSI','https://api.whatsapp.com/send?text=','innerHTML','table','anfitrion_name','stopPropagation','DOMContentLoaded','No\x20hay\x20invitación\x20seleccionada\x20para\x20aprobar.','DEBUG_APP_JS:\x20Código\x20detectado\x20(sin\x20parsear\x20URL):','(((.+)+)+)+$','DEBUG_APP_JS:\x20Contenedor\x20del\x20escáner\x20oculto\x20porque\x20el\x20elemento\x20video\x20no\x20se\x20encontró\x20en\x20el\x20DOM.','beforeunload','DEBUG_APP_JS:\x20Botón\x20Atrás\x20encontrado.\x20Añadiendo\x20listener\x20para\x20history.back().','includes/save_qr_image.php','maxWidth','DEBUG_APP_JS:\x20Error\x20de\x20decodificación/escaneo:','button.view-qr-btn','Verificando\x20invitación...','DEBUG_APP_JS:\x20Librería\x20ZXing\x20o\x20BrowserMultiFormatReader\x20no\x20cargada\x20o\x20no\x20disponible.','img','NotFoundException','constructor','valid','DEBUG_APP_JS:\x20Error\x20al\x20obtener\x20datos\x20de\x20<img>:','DEBUG_APP_JS:\x20Enviando\x20solicitud\x20de\x20aprobación\x20para:','Error\x20de\x20red\x20o\x20servidor\x20al\x20verificar.\x20Estado:\x20','150px','then','includes/delete_invitation.php','tr.invitation-details-row','text','search','error','DEBUG_APP_JS:\x20Ocultando\x20display\x20de\x20QR.','DEBUG_APP_JS:\x20Error\x20al\x20obtener\x20datos\x20del\x20canvas:','image_data','json','DEBUG_APP_JS:\x20Respuesta\x20recibida\x20de\x20approve_invitation.php','7khloPG','#ffffff','DEBUG_APP_JS:\x20Error\x20al\x20iniciar\x20cámara/escáner\x20con\x20constraints:','getElementById','Fila\x20eliminada\x20del\x20DOM.','DEBUG_APP_JS:\x20Respuesta\x20recibida\x20de\x20save_qr_image.php','status-message','dataset','DEBUG_APP_JS:\x20No\x20se\x20encontró\x20elemento\x20canvas\x20o\x20img\x20dentro\x20del\x20div\x20QR.','style','DEBUG_APP_JS:\x20Contenedor\x20del\x20escáner\x20oculto\x20porque\x20ZXing\x20no\x20cargó.','.png','status-','DEBUG_APP_JS:\x20Imagen\x20QR\x20obtenida\x20de\x20<img>.','DEBUG_APP_JS:\x20Página\x20de\x20Listado\x20de\x20Invitaciones\x20detectada.\x20Inicializando\x20lógica\x20de\x20filas\x20expandibles.','DEBUG_APP_JS:\x20Enviando\x20imagen\x20QR\x20al\x20servidor\x20para\x20guardar:','DEBUG_APP_JS:\x20Lector\x20ZXing\x20reseteado\x20en\x20beforeunload.','aprobado','invitation-details','success','DEBUG_APP_JS:\x20Fallo\x20lógico\x20al\x20guardar\x20imagen\x20QR:','table-row','?\x20Esta\x20acción\x20no\x20se\x20puede\x20deshacer.','previousElementSibling','video','DEBUG_APP_JS:\x20###\x20new\x20QRCode()\x20fue\x20llamado.\x20###','DEBUG_APP_JS:\x20Fallo\x20lógico\x20en\x20aprobación:','DEBUG_INVITAR:\x20##\x20El\x20div\x20#qrcode\x20ya\x20contiene\x20un\x20QR.\x20Cancelando\x20nueva\x20generación.\x20##','DEBUG_APP_JS:\x20Datos\x20JSON\x20de\x20verificación:','11462096MxnBol','location','updateInvitationDetails\x20llamado\x20pero\x20invitationDetailsDiv\x20(#invitation-details)\x20no\x20fue\x20encontrado/asignado\x20en\x20DOMContentLoaded.','Invitación\x20Válida','showApproveButton\x20llamado\x20pero\x20approveBtn\x20(#approve-btn)\x20no\x20fue\x20encontrado/asignado\x20en\x20DOMContentLoaded.','display','No\x20se\x20pudo\x20encontrar\x20la\x20fila\x20de\x20detalles\x20para\x20eliminar\x20del\x20DOM.\x20Recargando\x20página.','¿Está\x20seguro\x20de\x20aprobar\x20la\x20entrada\x20para\x20esta\x20invitación?','file_path','Error\x20al\x20aprobar\x20la\x20entrada.','Error:\x20Librería\x20de\x20escaneo\x20no\x20cargada.','Mensaje\x20de\x20error\x20desconocido.','includes/approve_invitation.php','invitation-summary-row','toDataURL','isValid','DEBUG_APP_JS:\x20Datos\x20JSON\x20de\x20aprobación:','message','DEBUG_APP_JS:\x20Error\x20en\x20fetch\x20de\x20aprobación:','#000000','1896204pSgYtS','DEBUG_APP_JS:\x20Código\x20detectado:','appendChild','return\x20(function()\x20','BrowserMultiFormatReader','exception','height','DEBUG_APP_JS:\x20DOMContentLoaded.\x20Inicializando\x20lógica\x20de\x20página.','DEBUG_APP_JS:\x20Imagen\x20QR\x20cargada\x20exitosamente:','code','invitation','target','DEBUG_APP_JS:\x20No\x20se\x20pudieron\x20obtener\x20los\x20datos\x20de\x20la\x20imagen\x20QR\x20para\x20guardar.','warn','approved','auto','block','append','La\x20respuesta\x20de\x20la\x20red\x20no\x20fue\x20OK.\x20Estado:\x20','¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20invitación\x20con\x20código\x20','catch','qrcode','DEBUG_APP_JS:\x20Contenedor\x20del\x20escáner\x20oculto\x20debido\x20a\x20error\x20de\x20inicio.','Error\x20de\x20comunicación\x20al\x20aprobar.','closest','undefined','trim','.qr-code-display','scanner','info','376kEJYfb','No\x20se\x20pudieron\x20encontrar\x20las\x20filas\x20summary/details\x20adyacentes\x20para\x20eliminar\x20del\x20DOM.\x20Recargando\x20página.','DEBUG_APP_JS:\x20Código\x20de\x20invitación\x20del\x20botón:','expired','apply','invitations-table','DEBUG_APP_JS:\x20saveQrImage\x20llamado\x20para\x20código:','4ipHmSA','reload','action','function','DEBUG_INVITAR:\x20###\x20PREPARANDO\x20LLAMADA\x20a\x20new\x20QRCode()\x20###','DEBUG_APP_JS:\x20ZXing\x20BrowserMultiFormatReader\x20creado\x20y\x20asignado\x20a\x20codeReaderInstance.','facingMode','classList','click','OverconstrainedError','canvas,\x20img','console','querySelectorAll','<p\x20style=\x22color:\x20red;\x22>Error\x20al\x20cargar\x20QR.</p>','none','prototype','NotFoundError','.delete-invite-btn','DEBUG_APP_JS:\x20Fila\x20de\x20detalles\x20mostrada.','add','DEBUG_APP_JS:\x20Error\x20al\x20cargar\x20imagen\x20QR:','#detail-expiration','nextElementSibling','status','Error\x20en\x20la\x20comunicación\x20con\x20el\x20servidor\x20al\x20intentar\x20eliminar\x20la\x20invitación.','DEBUG_APP_JS:\x20checkInvitation\x20llamado\x20con\x20código:','src','updateStatusDisplay\x20llamado\x20pero\x20statusDisplay\x20(#status-display)\x20no\x20fue\x20encontrado/asignado\x20en\x20DOMContentLoaded.','statusText','toString','{}.constructor(\x22return\x20this\x22)(\x20)','startsWith','delete','5AUfkXR','Eliminación\x20cancelada\x20por\x20el\x20usuario.','remove','DEBUG_APP_JS:\x20Scanner\x20reseteado\x20tras\x20lectura.','DEBUG_APP_JS:\x20Página\x20Invitar\x20detectada.','Entrada\x20Aprobada.','reset','className','3216249PQylJt','trace','#detail-anfitrion-lote','DEBUG_APP_JS:\x20Texto\x20escaneado\x20vacío\x20o\x20solo\x20espacios.','NotAllowedError','1453860zthefH','disabled','addEventListener','textContent'];_0x57b5=function(){return _0x3466ba;};return _0x57b5();}function updateStatusDisplay(_0x6eb506,_0x26538e){const _0x40b3be=_0x2d83;statusDisplay?(statusDisplay[_0x40b3be(0x1ec)]=_0x6eb506,statusDisplay[_0x40b3be(0x1e3)]=_0x40b3be(0x244),_0x26538e&&statusDisplay[_0x40b3be(0x1c2)][_0x40b3be(0x1ce)](_0x40b3be(0x24a)+_0x26538e),statusDisplay[_0x40b3be(0x247)]['display']=_0x40b3be(0x1a6)):console[_0x40b3be(0x1a3)](_0x40b3be(0x1d6));}function updateInvitationDetails(_0x540ada){const _0x1d25f0=_0x2d83;if(invitationDetailsDiv){if(_0x540ada){const _0x28f8b8=invitationDetailsDiv['querySelector']('#detail-guest-name'),_0x148b70=invitationDetailsDiv[_0x1d25f0(0x1ff)]('#detail-anfitrion-name'),_0x6adc36=invitationDetailsDiv[_0x1d25f0(0x1ff)](_0x1d25f0(0x1e6)),_0x2a68cc=invitationDetailsDiv[_0x1d25f0(0x1ff)](_0x1d25f0(0x1d0));_0x28f8b8&&(_0x28f8b8[_0x1d25f0(0x1ec)]=_0x540ada['invitado_nombre']??_0x1d25f0(0x214)),_0x148b70&&(_0x148b70[_0x1d25f0(0x1ec)]=_0x540ada[_0x1d25f0(0x21c)]??_0x1d25f0(0x214)),_0x6adc36&&(_0x6adc36[_0x1d25f0(0x1ec)]=_0x540ada['anfitrion_lote']??'N/A'),_0x2a68cc&&(_0x2a68cc['textContent']=_0x540ada[_0x1d25f0(0x211)]??'N/A'),invitationDetailsDiv[_0x1d25f0(0x247)][_0x1d25f0(0x187)]=_0x1d25f0(0x1a6);}else invitationDetailsDiv[_0x1d25f0(0x247)][_0x1d25f0(0x187)]=_0x1d25f0(0x1c9);}else console['warn'](_0x1d25f0(0x184));}function showApproveButton(_0x2bef1d){const _0x3ee760=_0x2d83;approveBtn?(approveBtn[_0x3ee760(0x247)][_0x3ee760(0x187)]=_0x2bef1d?_0x3ee760(0x1a6):_0x3ee760(0x1c9),approveBtn[_0x3ee760(0x1ea)]=!_0x2bef1d):console[_0x3ee760(0x1a3)](_0x3ee760(0x186));}function checkInvitation(_0x1f94f6){const _0x52e06d=_0x2d83;currentScannedCode=null,updateStatusDisplay(_0x52e06d(0x229),_0x52e06d(0x1b3)),updateInvitationDetails(null),showApproveButton(!0x1),console[_0x52e06d(0x204)](_0x52e06d(0x1d4),_0x1f94f6);const _0x353067='includes/check_invitation.php?code='+encodeURIComponent(_0x1f94f6);fetch(_0x353067)['then'](_0x26e82d=>(console['log']('DEBUG_APP_JS:\x20Respuesta\x20recibida\x20de\x20check_invitation.php',_0x26e82d),_0x26e82d['ok']?_0x26e82d[_0x52e06d(0x23c)]():_0x26e82d[_0x52e06d(0x23c)]()[_0x52e06d(0x1aa)](()=>{const _0x454025=_0x52e06d;throw new Error(_0x454025(0x231)+_0x26e82d['status']);})))[_0x52e06d(0x233)](_0x1f6584=>{const _0x253403=_0x52e06d;if(console[_0x253403(0x204)](_0x253403(0x181),_0x1f6584),_0x1f6584[_0x253403(0x251)]){if(updateInvitationDetails(_0x1f6584['invitation']),currentScannedCode=_0x1f6584['invitation'][_0x253403(0x19f)],_0x1f6584[_0x253403(0x191)]){if(updateStatusDisplay(_0x1f6584[_0x253403(0x193)]||_0x253403(0x185),_0x253403(0x22e)),'pendiente'===_0x1f6584[_0x253403(0x1a0)][_0x253403(0x1d2)])showApproveButton(!0x0);else{const _0x5d9567=_0x253403(0x24f)===_0x1f6584['invitation']['status']?_0x253403(0x1a4):_0x253403(0x1b7);updateStatusDisplay(_0x1f6584['message']||'Invitación\x20Válida,\x20pero\x20ya\x20está\x20'+_0x1f6584[_0x253403(0x1a0)][_0x253403(0x1d2)],_0x5d9567),showApproveButton(!0x1);}}else{const _0x9d5a5b='aprobado'===_0x1f6584['invitation'][_0x253403(0x1d2)]?_0x253403(0x1a4):'expired';updateStatusDisplay(_0x1f6584[_0x253403(0x193)]||'Invitación\x20Inválida\x20o\x20Expirada.',_0x9d5a5b),updateInvitationDetails(null),showApproveButton(!0x1);}}else console[_0x253403(0x238)](_0x253403(0x1f6),_0x1f6584[_0x253403(0x193)]),updateStatusDisplay(_0x1f6584[_0x253403(0x193)]||'Error\x20al\x20verificar\x20invitación.',_0x253403(0x238)),updateInvitationDetails(null),showApproveButton(!0x1);})['catch'](_0x2b590c=>{const _0x4d410d=_0x52e06d;console[_0x4d410d(0x238)]('DEBUG_APP_JS:\x20Error\x20en\x20fetch\x20de\x20verificación:',_0x2b590c),updateStatusDisplay(_0x4d410d(0x20e),_0x4d410d(0x238)),updateInvitationDetails(null),showApproveButton(!0x1);});}function approveInvitation(){const _0x3751e3=_0x2d83;if(!currentScannedCode)return updateStatusDisplay(_0x3751e3(0x21f),_0x3751e3(0x238)),void showApproveButton(!0x1);if(confirm(_0x3751e3(0x189))){showApproveButton(!0x1),updateStatusDisplay('Aprobando...',_0x3751e3(0x1b3));const _0x3e88be=new FormData();_0x3e88be[_0x3751e3(0x1a7)](_0x3751e3(0x19f),currentScannedCode),console[_0x3751e3(0x204)](_0x3751e3(0x230),currentScannedCode),fetch(_0x3751e3(0x18e),{'method':_0x3751e3(0x20d),'body':_0x3e88be})[_0x3751e3(0x233)](_0x54ddb4=>(console[_0x3751e3(0x204)](_0x3751e3(0x23d),_0x54ddb4),_0x54ddb4['ok']?_0x54ddb4[_0x3751e3(0x23c)]():_0x54ddb4[_0x3751e3(0x23c)]()['catch'](()=>{const _0x2a106b=_0x3751e3;throw new Error('Error\x20de\x20red\x20o\x20servidor\x20al\x20aprobar.\x20Estado:\x20'+_0x54ddb4[_0x2a106b(0x1d2)]);})))[_0x3751e3(0x233)](_0x13bdbb=>{const _0x2f8cd7=_0x3751e3;console[_0x2f8cd7(0x204)](_0x2f8cd7(0x192),_0x13bdbb),_0x13bdbb[_0x2f8cd7(0x251)]?(updateStatusDisplay(_0x13bdbb[_0x2f8cd7(0x193)]||_0x2f8cd7(0x1e1),_0x2f8cd7(0x1a4)),updateInvitationDetails(null),currentScannedCode=null):(console['error'](_0x2f8cd7(0x17f),_0x13bdbb[_0x2f8cd7(0x193)]),updateStatusDisplay(_0x13bdbb[_0x2f8cd7(0x193)]||_0x2f8cd7(0x18b),_0x2f8cd7(0x238)));})[_0x3751e3(0x1aa)](_0x4b4b61=>{const _0x5a4ae0=_0x3751e3;console[_0x5a4ae0(0x238)](_0x5a4ae0(0x194),_0x4b4b61),updateStatusDisplay(_0x5a4ae0(0x1ad),_0x5a4ae0(0x238));});}}function saveQrImage(_0x1a2196,_0x4f4276){const _0x453cd6=_0x2d83;console[_0x453cd6(0x204)](_0x453cd6(0x1ba),_0x1a2196);const _0x4bce58=_0x4f4276[_0x453cd6(0x1ff)]('canvas');let _0x148157=null,_0xe160dc='image/png';if(_0x4bce58)try{_0x148157=_0x4bce58[_0x453cd6(0x190)](_0xe160dc),console[_0x453cd6(0x204)](_0x453cd6(0x1fb));}catch(_0x20db77){console[_0x453cd6(0x238)](_0x453cd6(0x23a),_0x20db77);const _0x3d2af0=_0x4f4276[_0x453cd6(0x1ff)](_0x453cd6(0x22b));if(_0x3d2af0)try{if(_0x148157=_0x3d2af0[_0x453cd6(0x1d5)],console['log'](_0x453cd6(0x24b)),_0x148157[_0x453cd6(0x1da)](_0x453cd6(0x1fa))){const _0x597ba4=_0x148157['match'](/^data:([^;]+)/);_0x597ba4&&_0x597ba4[0x1]&&(_0xe160dc=_0x597ba4[0x1]);}else console[_0x453cd6(0x1a3)](_0x453cd6(0x207)),_0x148157=null;}catch(_0x2d1414){console[_0x453cd6(0x238)](_0x453cd6(0x22f),_0x2d1414),_0x148157=null;}}else console[_0x453cd6(0x238)](_0x453cd6(0x246));if(_0x148157){const _0x26d9eb=new FormData();_0x26d9eb[_0x453cd6(0x1a7)](_0x453cd6(0x19f),_0x1a2196),_0x26d9eb[_0x453cd6(0x1a7)](_0x453cd6(0x23b),_0x148157),_0x26d9eb['append']('image_type',_0xe160dc);const _0x1b621a=_0x453cd6(0x225);console[_0x453cd6(0x204)](_0x453cd6(0x24d),_0x1b621a),fetch(_0x1b621a,{'method':_0x453cd6(0x20d),'body':_0x26d9eb})[_0x453cd6(0x233)](_0x1c0e78=>(console[_0x453cd6(0x204)](_0x453cd6(0x243),_0x1c0e78),_0x1c0e78['ok']?_0x1c0e78['json']():_0x1c0e78[_0x453cd6(0x23c)]()[_0x453cd6(0x1aa)](()=>{const _0x2b5f95=_0x453cd6;throw new Error(_0x2b5f95(0x1f4)+_0x1c0e78[_0x2b5f95(0x1d2)]);})))[_0x453cd6(0x233)](_0xdd4654=>{const _0x5819f2=_0x453cd6;console['log'](_0x5819f2(0x216),_0xdd4654),_0xdd4654['success']?console['log']('DEBUG_APP_JS:\x20Imagen\x20QR\x20guardada\x20exitosamente\x20en:',_0xdd4654[_0x5819f2(0x18a)]):console[_0x5819f2(0x238)](_0x5819f2(0x252),_0xdd4654['message']);})[_0x453cd6(0x1aa)](_0x55c2ed=>{const _0x501755=_0x453cd6;console[_0x501755(0x238)]('DEBUG_APP_JS:\x20Error\x20en\x20fetch\x20al\x20guardar\x20imagen\x20QR:',_0x55c2ed);});}else console['error'](_0x453cd6(0x1a2));}document['addEventListener'](_0x570cef(0x21e),()=>{const _0x3a35cc=_0x570cef;if(console[_0x3a35cc(0x204)](_0x3a35cc(0x19d)),videoElement=document[_0x3a35cc(0x241)](_0x3a35cc(0x1b2)),scannerContainer=document[_0x3a35cc(0x241)](_0x3a35cc(0x20b)),statusDisplay=document[_0x3a35cc(0x241)]('status-display'),invitationDetailsDiv=document[_0x3a35cc(0x241)](_0x3a35cc(0x250)),approveBtn=document[_0x3a35cc(0x241)](_0x3a35cc(0x1f5)),qrcodeDiv=document['getElementById'](_0x3a35cc(0x1ab)),whatsappShareBtn=document[_0x3a35cc(0x241)](_0x3a35cc(0x217)),invitationsTable=document['getElementById'](_0x3a35cc(0x1b9)),'undefined'!=typeof initialCode&&initialCode&&(console['log']('DEBUG_APP_JS:\x20initialCode\x20detectado\x20en\x20DOMContentLoaded:',initialCode),_0x3a35cc(0x1be)==typeof checkInvitation?checkInvitation(initialCode):(console['error'](_0x3a35cc(0x1fc)),updateStatusDisplay(_0x3a35cc(0x1f8),_0x3a35cc(0x238)))),qrcodeDiv&&(console['log'](_0x3a35cc(0x1e0)),_0x3a35cc(0x1af)!=typeof qrCodeUrl&&qrCodeUrl)){if(qrcodeDiv[_0x3a35cc(0x1ff)](_0x3a35cc(0x1c5)))console[_0x3a35cc(0x1a3)](_0x3a35cc(0x180));else{if(console[_0x3a35cc(0x204)](_0x3a35cc(0x1bf)),console['log']('DEBUG_APP_JS:\x20Página\x20Invitar\x20detectada\x20con\x20QR\x20generado.\x20Inicializando\x20QR\x20y\x20compartir.'),_0x3a35cc(0x1af)!=typeof QRCode){if(console['log'](_0x3a35cc(0x209)),_0x3a35cc(0x1af)!=typeof rawCode&&rawCode)new QRCode(qrcodeDiv,{'text':rawCode,'width':0xc8,'height':0xc8,'colorDark':_0x3a35cc(0x195),'colorLight':_0x3a35cc(0x23f),'correctLevel':QRCode[_0x3a35cc(0x206)]['H']}),console[_0x3a35cc(0x204)](_0x3a35cc(0x17e));else console[_0x3a35cc(0x238)](_0x3a35cc(0x212)),qrcodeDiv&&(qrcodeDiv[_0x3a35cc(0x21a)]='<p\x20style=\x22color:red;\x22>Error:\x20Código\x20QR\x20vacío.</p>');}else console[_0x3a35cc(0x238)]('Error:\x20Librería\x20QRCode\x20(qrcode.min.js)\x20no\x20cargada.\x20Asegúrate\x20de\x20que\x20esté\x20incluida\x20en\x20invitar.php.'),qrcodeDiv&&(qrcodeDiv['innerHTML']=_0x3a35cc(0x205));}whatsappShareBtn&&whatsappShareBtn[_0x3a35cc(0x1eb)](_0x3a35cc(0x1c3),function(){const _0x1e72fe=_0x3a35cc;var _0x1e73be='¡Hola!\x20Tienes\x20una\x20invitación\x20para\x20ingresar\x20al\x20barrio.\x0a\x0aPresenta\x20este\x20enlace\x20en\x20seguridad:\x0a'+qrCodeUrl,_0x24eb03=_0x1e72fe(0x219)+encodeURIComponent(_0x1e73be);window['open'](_0x24eb03,'_blank');});}if(videoElement){if(console[_0x3a35cc(0x204)](_0x3a35cc(0x20a)),'undefined'!=typeof ZXing&&void 0x0!==ZXing[_0x3a35cc(0x19a)]){codeReaderInstance=new ZXing['BrowserMultiFormatReader'](),console[_0x3a35cc(0x204)](_0x3a35cc(0x1c0));const _0x2c7d99={'video':{'facingMode':{'exact':'environment'}}};console[_0x3a35cc(0x204)]('DEBUG_APP_JS:\x20Llamando\x20a\x20decodeFromConstraints\x20con\x20facingMode:',_0x2c7d99[_0x3a35cc(0x17d)][_0x3a35cc(0x1c1)]),codeReaderInstance['decodeFromConstraints'](_0x2c7d99,videoElement,(_0x5187f7,_0x5f482e)=>{const _0x339979=_0x3a35cc;if(_0x5187f7){console[_0x339979(0x204)](_0x339979(0x197),_0x5187f7['text']);const _0x18620b=_0x5187f7[_0x339979(0x236)][_0x339979(0x1b0)]();_0x18620b?(console[_0x339979(0x204)](_0x339979(0x220),_0x18620b),codeReaderInstance&&(codeReaderInstance[_0x339979(0x1e2)](),console[_0x339979(0x204)](_0x339979(0x1df))),videoElement&&(videoElement[_0x339979(0x247)][_0x339979(0x187)]=_0x339979(0x1c9)),scannerContainer&&(scannerContainer['style'][_0x339979(0x187)]=_0x339979(0x1c9),console['log'](_0x339979(0x208))),checkInvitation(_0x18620b)):console[_0x339979(0x204)](_0x339979(0x1e7));}!_0x5f482e||_0x5f482e instanceof ZXing[_0x339979(0x22c)]||console['error'](_0x339979(0x227),_0x5f482e);})['catch'](_0x16bb00=>{const _0x15c7e8=_0x3a35cc;console['error'](_0x15c7e8(0x240),_0x16bb00);let _0x127b62=_0x15c7e8(0x213);_0x16bb00&&_0x16bb00['name']&&(_0x127b62+='\x20('+_0x16bb00[_0x15c7e8(0x203)]+')',_0x15c7e8(0x1e8)===_0x16bb00[_0x15c7e8(0x203)]||_0x15c7e8(0x20c)===_0x16bb00[_0x15c7e8(0x203)]?_0x127b62='Permiso\x20de\x20cámara\x20denegado.\x20Por\x20favor,\x20permite\x20el\x20acceso\x20en\x20la\x20configuración\x20del\x20navegador/dispositivo.':_0x15c7e8(0x1cb)!==_0x16bb00[_0x15c7e8(0x203)]&&_0x15c7e8(0x1c4)!==_0x16bb00[_0x15c7e8(0x203)]||(_0x127b62='Cámara\x20trasera\x20no\x20encontrada\x20o\x20no\x20cumple\x20los\x20requisitos.')),updateStatusDisplay(_0x127b62,'error'),videoElement&&(videoElement[_0x15c7e8(0x247)][_0x15c7e8(0x187)]=_0x15c7e8(0x1c9)),scannerContainer&&(scannerContainer[_0x15c7e8(0x247)][_0x15c7e8(0x187)]=_0x15c7e8(0x1c9),console['log'](_0x15c7e8(0x1ac)));});}else console['log'](_0x3a35cc(0x22a)),videoElement&&(videoElement['style'][_0x3a35cc(0x187)]=_0x3a35cc(0x1c9)),scannerContainer&&(scannerContainer[_0x3a35cc(0x247)][_0x3a35cc(0x187)]='none',console[_0x3a35cc(0x204)](_0x3a35cc(0x248))),updateStatusDisplay(_0x3a35cc(0x18c),'error');approveBtn&&approveBtn['addEventListener']('click',approveInvitation);}else console[_0x3a35cc(0x204)]('DEBUG_APP_JS:\x20Elemento\x20video\x20#scanner\x20NO\x20encontrado\x20en\x20DOMContentLoaded.\x20No\x20se\x20inicializa\x20lógica\x20de\x20escaneo\x20de\x20seguridad.'),scannerContainer&&(scannerContainer[_0x3a35cc(0x247)][_0x3a35cc(0x187)]=_0x3a35cc(0x1c9),console[_0x3a35cc(0x204)](_0x3a35cc(0x222)));invitationsTable&&(console['log'](_0x3a35cc(0x24c)),invitationsTable[_0x3a35cc(0x1eb)](_0x3a35cc(0x1c3),function(_0x5908c9){const _0x26a793=_0x3a35cc;let _0x20b94d=_0x5908c9['target'][_0x26a793(0x1ae)](_0x26a793(0x1ef));if(_0x20b94d){console[_0x26a793(0x204)](_0x26a793(0x1f9));let _0xce92f2=_0x20b94d[_0x26a793(0x1d1)];if(_0xce92f2&&_0xce92f2[_0x26a793(0x1c2)][_0x26a793(0x1f0)]('invitation-details-row')){if(_0x26a793(0x1c9)===_0xce92f2['style'][_0x26a793(0x187)])_0xce92f2[_0x26a793(0x247)]['display']=_0x26a793(0x17a),console[_0x26a793(0x204)](_0x26a793(0x1cd)),_0x20b94d[_0x26a793(0x1c2)][_0x26a793(0x1ce)]('expanded');else{_0xce92f2[_0x26a793(0x247)][_0x26a793(0x187)]=_0x26a793(0x1c9),console[_0x26a793(0x204)](_0x26a793(0x1fd)),_0x20b94d[_0x26a793(0x1c2)][_0x26a793(0x1de)](_0x26a793(0x20f));const _0x53af7d=_0xce92f2[_0x26a793(0x1ff)](_0x26a793(0x1b1));_0x53af7d&&(_0x53af7d[_0x26a793(0x247)][_0x26a793(0x187)]=_0x26a793(0x1c9));}}}else console['log']('DEBUG_APP_JS:\x20Clic\x20no\x20en\x20fila\x20de\x20invitación\x20principal.');}),invitationsTable[_0x3a35cc(0x1eb)](_0x3a35cc(0x1c3),function(_0xa71da1){const _0x1b082c=_0x3a35cc,_0x25c2f3=_0xa71da1[_0x1b082c(0x1a1)][_0x1b082c(0x1ae)](_0x1b082c(0x228));if(_0x25c2f3){console[_0x1b082c(0x204)]('DEBUG_APP_JS:\x20Clic\x20en\x20botón\x20Ver\x20QR.'),_0xa71da1[_0x1b082c(0x21d)]();const _0x495073=_0x25c2f3[_0x1b082c(0x245)][_0x1b082c(0x19f)],_0x36dad0=_0x25c2f3[_0x1b082c(0x1d1)];if(_0x495073&&_0x36dad0){if(console[_0x1b082c(0x204)](_0x1b082c(0x1b6),_0x495073),_0x1b082c(0x1c9)===_0x36dad0[_0x1b082c(0x247)][_0x1b082c(0x187)]){const _0x1464e6='qr/'+encodeURIComponent(_0x495073)+_0x1b082c(0x249);_0x36dad0[_0x1b082c(0x21a)]='';const _0x416207=document[_0x1b082c(0x1f7)](_0x1b082c(0x22b));_0x416207[_0x1b082c(0x1d5)]=_0x1464e6,_0x416207[_0x1b082c(0x1fe)]=_0x1b082c(0x200)+_0x495073,_0x416207[_0x1b082c(0x247)][_0x1b082c(0x226)]=_0x1b082c(0x232),_0x416207[_0x1b082c(0x247)][_0x1b082c(0x19c)]=_0x1b082c(0x1a5),_0x416207['onerror']=function(){const _0x297a20=_0x1b082c;console[_0x297a20(0x238)](_0x297a20(0x1cf),_0x1464e6),_0x36dad0[_0x297a20(0x21a)]=_0x297a20(0x1c8),_0x36dad0['style']['display']=_0x297a20(0x1a6);},_0x416207[_0x1b082c(0x1f1)]=function(){const _0x32a58e=_0x1b082c;console[_0x32a58e(0x204)](_0x32a58e(0x19e),_0x1464e6);},_0x36dad0[_0x1b082c(0x198)](_0x416207),_0x36dad0[_0x1b082c(0x247)][_0x1b082c(0x187)]=_0x1b082c(0x1a6);}else _0x36dad0[_0x1b082c(0x247)][_0x1b082c(0x187)]='none',_0x36dad0['innerHTML']='',console[_0x1b082c(0x204)](_0x1b082c(0x239));}else console[_0x1b082c(0x238)]('DEBUG_APP_JS:\x20Código\x20de\x20invitación\x20o\x20div\x20de\x20display\x20QR\x20no\x20encontrado\x20para\x20el\x20botón.');}}));const _0x232fa3=document[_0x3a35cc(0x1ff)]('.back-btn');_0x232fa3&&(console[_0x3a35cc(0x204)](_0x3a35cc(0x224)),_0x232fa3[_0x3a35cc(0x1eb)](_0x3a35cc(0x1c3),function(_0xb052e2){const _0x49e835=_0x3a35cc;_0xb052e2[_0x49e835(0x215)](),history[_0x49e835(0x1f2)]();})),document[_0x3a35cc(0x1c7)](_0x3a35cc(0x1cc))['forEach'](_0x1bf100=>{const _0x246fd7=_0x3a35cc;_0x1bf100[_0x246fd7(0x1eb)](_0x246fd7(0x1c3),function(){const _0x59100f=_0x246fd7,_0xae96e=this[_0x59100f(0x245)][_0x59100f(0x19f)];if(confirm(_0x59100f(0x1a9)+_0xae96e+_0x59100f(0x17b))){console['log']('Usuario\x20confirmó\x20eliminación\x20para\x20código:',_0xae96e);const _0x1fbe4d=_0x59100f(0x234),_0x25a3a8=new FormData();_0x25a3a8[_0x59100f(0x1a7)](_0x59100f(0x1bd),_0x59100f(0x1db)),_0x25a3a8[_0x59100f(0x1a7)](_0x59100f(0x19f),_0xae96e),fetch(_0x1fbe4d,{'method':_0x59100f(0x20d),'body':_0x25a3a8})[_0x59100f(0x233)](_0x1aca3f=>{const _0x3653e4=_0x59100f;if(!_0x1aca3f['ok'])throw new Error(_0x3653e4(0x1a8)+_0x1aca3f[_0x3653e4(0x1d2)]+'\x20'+_0x1aca3f[_0x3653e4(0x1d7)]);return _0x1aca3f['json']();})[_0x59100f(0x233)](_0x57a73b=>{const _0x2cba0e=_0x59100f;if(console['log']('Respuesta\x20del\x20servidor:',_0x57a73b),_0x57a73b['success']){alert(_0x2cba0e(0x210)+_0x57a73b['message']);const _0x26fa0a=_0x1bf100[_0x2cba0e(0x1ae)](_0x2cba0e(0x235));if(_0x26fa0a){const _0x518e47=_0x26fa0a[_0x2cba0e(0x17c)];_0x518e47&&_0x518e47[_0x2cba0e(0x1c2)]['contains'](_0x2cba0e(0x18f))?(_0x518e47[_0x2cba0e(0x1de)](),_0x26fa0a[_0x2cba0e(0x1de)](),console['log'](_0x2cba0e(0x242))):(console['warn'](_0x2cba0e(0x1b5)),window[_0x2cba0e(0x183)]['reload']());}else console['warn'](_0x2cba0e(0x188)),window[_0x2cba0e(0x183)][_0x2cba0e(0x1bc)]();}else alert(_0x2cba0e(0x1f3)+(_0x57a73b[_0x2cba0e(0x193)]||_0x2cba0e(0x18d)));})[_0x59100f(0x1aa)](_0x41d83a=>{const _0x146342=_0x59100f;console[_0x146342(0x238)](_0x146342(0x201),_0x41d83a),alert(_0x146342(0x1d3));});}else console['log'](_0x59100f(0x1dd));});});}),window[_0x570cef(0x1eb)](_0x570cef(0x223),()=>{const _0x2fa814=_0x570cef;codeReaderInstance&&_0x2fa814(0x1be)==typeof codeReaderInstance[_0x2fa814(0x1e2)]&&(codeReaderInstance['reset'](),console['log'](_0x2fa814(0x24e)));});