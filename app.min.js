// @ts-nocheck
const _0x50535f=_0x3c88;(function(_0x32ca4e,_0x5f3c52){const _0x549ae5=_0x3c88,_0x6249f8=_0x32ca4e();while(!![]){try{const _0x3dbd88=parseInt(_0x549ae5(0xc4))/0x1+parseInt(_0x549ae5(0xde))/0x2*(parseInt(_0x549ae5(0xa3))/0x3)+-parseInt(_0x549ae5(0xdc))/0x4*(parseInt(_0x549ae5(0xbd))/0x5)+-parseInt(_0x549ae5(0xea))/0x6+parseInt(_0x549ae5(0xe0))/0x7*(-parseInt(_0x549ae5(0xc9))/0x8)+-parseInt(_0x549ae5(0xb3))/0x9+parseInt(_0x549ae5(0xce))/0xa;if(_0x3dbd88===_0x5f3c52)break;else _0x6249f8['push'](_0x6249f8['shift']());}catch(_0x10bfb4){_0x6249f8['push'](_0x6249f8['shift']());}}}(_0x5ae0,0x186f0));const _0xaf413e=(function(){let _0x4b1403=!![];return function(_0x5a3ceb,_0x4730db){const _0xc5de62=_0x4b1403?function(){if(_0x4730db){const _0x288820=_0x4730db['apply'](_0x5a3ceb,arguments);return _0x4730db=null,_0x288820;}}:function(){};return _0x4b1403=![],_0xc5de62;};}()),_0x2e05e9=_0xaf413e(this,function(){const _0x57f66a=_0x3c88;return _0x2e05e9['toString']()['search'](_0x57f66a(0xc2))[_0x57f66a(0xd9)]()['constructor'](_0x2e05e9)[_0x57f66a(0xec)]('(((.+)+)+)+$');});_0x2e05e9();const _0x471867=(function(){let _0xd60e4c=!![];return function(_0x1303fd,_0x4827f4){const _0x747ffe=_0xd60e4c?function(){const _0x4e7e49=_0x3c88;if(_0x4827f4){const _0x1bb6db=_0x4827f4[_0x4e7e49(0xbc)](_0x1303fd,arguments);return _0x4827f4=null,_0x1bb6db;}}:function(){};return _0xd60e4c=![],_0x747ffe;};}()),_0x2a2aac=_0x471867(this,function(){const _0x1ee371=_0x3c88,_0x3602b6=function(){const _0xb8d8d6=_0x3c88;let _0x1fb170;try{_0x1fb170=Function(_0xb8d8d6(0xcf)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2b15ef){_0x1fb170=window;}return _0x1fb170;},_0x11cff3=_0x3602b6(),_0x47faaf=_0x11cff3['console']=_0x11cff3[_0x1ee371(0xb5)]||{},_0x1f6e90=[_0x1ee371(0xbe),'warn',_0x1ee371(0xcd),_0x1ee371(0xc5),_0x1ee371(0xe6),'table','trace'];for(let _0x5777d3=0x0;_0x5777d3<_0x1f6e90[_0x1ee371(0x9f)];_0x5777d3++){const _0x4b3820=_0x471867[_0x1ee371(0xa9)][_0x1ee371(0xb9)][_0x1ee371(0xd7)](_0x471867),_0x187fde=_0x1f6e90[_0x5777d3],_0xc8bb89=_0x47faaf[_0x187fde]||_0x4b3820;_0x4b3820[_0x1ee371(0xa8)]=_0x471867[_0x1ee371(0xd7)](_0x471867),_0x4b3820[_0x1ee371(0xd9)]=_0xc8bb89[_0x1ee371(0xd9)][_0x1ee371(0xd7)](_0xc8bb89),_0x47faaf[_0x187fde]=_0x4b3820;}});_0x2a2aac();function updateStatusDisplay(_0x49bc91,_0x2a62d7){const _0x2730ce=_0x3c88,_0x43092c=document[_0x2730ce(0xc1)](_0x2730ce(0xc0));_0x43092c[_0x2730ce(0xe9)]=_0x49bc91,_0x43092c['className']=_0x2730ce(0xe1),_0x2a62d7&&_0x43092c[_0x2730ce(0xee)][_0x2730ce(0xe4)]('status-'+_0x2a62d7);}function _0x5ae0(){const _0x5cabba=['scanner','exception','message','detail-expiration','textContent','139050czQUJT','No\x20se\x20encontraron\x20cámaras.','search','invitation','classList','length','aprobado','Entrada\x20Aprobada.','approved','453aAfHPB','json','getCameras','No\x20hay\x20invitación\x20para\x20aprobar.','style','__proto__','constructor','status','¿Está\x20seguro\x20de\x20aprobar\x20la\x20entrada\x20para\x20esta\x20invitación?','Invalid\x20QR\x20content:','fecha_expiracion','QR\x20no\x20válido.\x20No\x20se\x20encontró\x20código.','detail-anfitrion-lote','none','detail-anfitrion-name','Error\x20de\x20comunicación\x20al\x20aprobar.','800055lLicNL','then','console','Error\x20al\x20acceder\x20a\x20la\x20cámara:\x20','addEventListener','display','prototype','click','get','apply','5OXbobj','log','Error\x20al\x20verificar\x20invitación.','status-display','getElementById','(((.+)+)+)+$','Error\x20al\x20aprobar\x20la\x20entrada.','85464WuBWjt','error','start','anfitrion_lote','Scanner','63160YMtQLq','anfitrion_name','append','Error\x20de\x20comunicación\x20con\x20el\x20servidor.','info','3280350MjazpG','return\x20(function()\x20','catch','detail-guest-name','disabled','block','code','isValid','seguridad/approve_invitation.php','bind','expired','toString','success','Error\x20fetching\x20invitation:','430492kYuNcj','scan','118qMAwra','QR\x20no\x20válido.\x20Formato\x20incorrecto.','91BdMfCE','status-message','No\x20cameras\x20found.','addListener','add'];_0x5ae0=function(){return _0x5cabba;};return _0x5ae0();}function updateInvitationDetails(_0x503aaf){const _0x4c1a66=_0x3c88,_0x18ab12=document[_0x4c1a66(0xc1)]('invitation-details');_0x503aaf?(document[_0x4c1a66(0xc1)](_0x4c1a66(0xd1))[_0x4c1a66(0xe9)]=_0x503aaf['invitado_nombre'],document[_0x4c1a66(0xc1)](_0x4c1a66(0xb1))[_0x4c1a66(0xe9)]=_0x503aaf[_0x4c1a66(0xca)],document[_0x4c1a66(0xc1)](_0x4c1a66(0xaf))['textContent']=_0x503aaf[_0x4c1a66(0xc7)],document['getElementById'](_0x4c1a66(0xe8))[_0x4c1a66(0xe9)]=_0x503aaf[_0x4c1a66(0xad)],_0x18ab12[_0x4c1a66(0xa7)][_0x4c1a66(0xb8)]=_0x4c1a66(0xd3)):_0x18ab12[_0x4c1a66(0xa7)][_0x4c1a66(0xb8)]=_0x4c1a66(0xb0);}function showApproveButton(_0xb1c99e){const _0x2a4141=_0x3c88,_0x5745b9=document['getElementById']('approve-btn');_0x5745b9&&(_0x5745b9[_0x2a4141(0xa7)][_0x2a4141(0xb8)]=_0xb1c99e?'block':_0x2a4141(0xb0),_0x5745b9[_0x2a4141(0xd2)]=!_0xb1c99e);}let currentScannedCode=null;function _0x3c88(_0x1e29c3,_0x4807d3){const _0x334921=_0x5ae0();return _0x3c88=function(_0x2a2aac,_0x471867){_0x2a2aac=_0x2a2aac-0x9f;let _0x4b08b5=_0x334921[_0x2a2aac];return _0x4b08b5;},_0x3c88(_0x1e29c3,_0x4807d3);}function checkInvitation(_0x5b5ae4){const _0x2cd272=_0x3c88;currentScannedCode=null,updateStatusDisplay('Verificando\x20invitación...',_0x2cd272(0xcd)),updateInvitationDetails(null),showApproveButton(!0x1),fetch('seguridad/check_invitation.php?code='+encodeURIComponent(_0x5b5ae4))[_0x2cd272(0xb4)](_0x546cca=>_0x546cca[_0x2cd272(0xa4)]())['then'](_0x3a9272=>{const _0x25cd4=_0x2cd272;_0x3a9272[_0x25cd4(0xda)]?(updateInvitationDetails(_0x3a9272[_0x25cd4(0xed)]),currentScannedCode=_0x3a9272[_0x25cd4(0xed)][_0x25cd4(0xd4)],_0x3a9272[_0x25cd4(0xd5)]?(updateStatusDisplay(_0x3a9272['message'],'valid'),showApproveButton(!0x0)):(updateStatusDisplay(_0x3a9272[_0x25cd4(0xe7)],_0x25cd4(0xa0)===_0x3a9272[_0x25cd4(0xed)][_0x25cd4(0xaa)]?_0x25cd4(0xa2):_0x25cd4(0xd8)),showApproveButton(!0x1))):(updateStatusDisplay(_0x3a9272[_0x25cd4(0xe7)]||_0x25cd4(0xbf),_0x25cd4(0xc5)),updateInvitationDetails(null),showApproveButton(!0x1));})[_0x2cd272(0xd0)](_0x51b988=>{const _0x47143d=_0x2cd272;console['error'](_0x47143d(0xdb),_0x51b988),updateStatusDisplay(_0x47143d(0xcc),_0x47143d(0xc5)),updateInvitationDetails(null),showApproveButton(!0x1);});}function approveInvitation(){const _0x29f86b=_0x3c88;if(!currentScannedCode)return updateStatusDisplay(_0x29f86b(0xa6),'error'),void showApproveButton(!0x1);if(confirm(_0x29f86b(0xab))){showApproveButton(!0x1),updateStatusDisplay('Aprobando...',_0x29f86b(0xcd));const _0x7e8e67=new FormData();_0x7e8e67[_0x29f86b(0xcb)](_0x29f86b(0xd4),currentScannedCode),fetch(_0x29f86b(0xd6),{'method':'POST','body':_0x7e8e67})[_0x29f86b(0xb4)](_0x4c8097=>_0x4c8097[_0x29f86b(0xa4)]())[_0x29f86b(0xb4)](_0x4e18aa=>{const _0x3213b4=_0x29f86b;_0x4e18aa['success']?(updateStatusDisplay(_0x4e18aa[_0x3213b4(0xe7)]||_0x3213b4(0xa1),'approved'),updateInvitationDetails(null),currentScannedCode=null):(updateStatusDisplay(_0x4e18aa['message']||_0x3213b4(0xc3),_0x3213b4(0xc5)),checkInvitation(currentScannedCode));})['catch'](_0x3ea346=>{const _0x3a438c=_0x29f86b;console[_0x3a438c(0xc5)]('Error\x20approving\x20invitation:',_0x3ea346),updateStatusDisplay(_0x3a438c(0xb2),_0x3a438c(0xc5)),showApproveButton(!0x0);});}}document[_0x50535f(0xb7)]('DOMContentLoaded',()=>{const _0x60a5cd=_0x50535f;if(document[_0x60a5cd(0xc1)](_0x60a5cd(0xe5))){let _0x2a9a08=new Instascan[(_0x60a5cd(0xc8))]({'video':document['getElementById']('scanner'),'mirror':!0x1});_0x2a9a08[_0x60a5cd(0xe3)](_0x60a5cd(0xdd),function(_0x35d0a7){const _0x203c8f=_0x60a5cd;console[_0x203c8f(0xbe)]('Scanned:',_0x35d0a7);try{const _0x2c62a6=new URL(_0x35d0a7)['searchParams'][_0x203c8f(0xbb)](_0x203c8f(0xd4));_0x2c62a6?checkInvitation(_0x2c62a6):(updateStatusDisplay(_0x203c8f(0xae),_0x203c8f(0xc5)),updateInvitationDetails(null),showApproveButton(!0x1));}catch(_0x225ce1){updateStatusDisplay(_0x203c8f(0xdf),'error'),updateInvitationDetails(null),showApproveButton(!0x1),console[_0x203c8f(0xc5)](_0x203c8f(0xac),_0x35d0a7,_0x225ce1);}}),Instascan['Camera'][_0x60a5cd(0xa5)]()[_0x60a5cd(0xb4)](function(_0x376597){const _0x5d5c18=_0x60a5cd;if(_0x376597[_0x5d5c18(0x9f)]>0x0){const _0xd6460d=_0x376597[0x1]||_0x376597[0x0];_0x2a9a08[_0x5d5c18(0xc6)](_0xd6460d),console[_0x5d5c18(0xbe)]('Scanner\x20started\x20with\x20camera:',_0xd6460d);}else console[_0x5d5c18(0xc5)](_0x5d5c18(0xe2)),updateStatusDisplay(_0x5d5c18(0xeb),_0x5d5c18(0xc5));})['catch'](function(_0x35a8ca){const _0x40029b=_0x60a5cd;console[_0x40029b(0xc5)](_0x35a8ca),updateStatusDisplay(_0x40029b(0xb6)+_0x35a8ca,_0x40029b(0xc5));});const _0x52dd1f=document['getElementById']('approve-btn');_0x52dd1f&&_0x52dd1f['addEventListener'](_0x60a5cd(0xba),approveInvitation);}});